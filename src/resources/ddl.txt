
CREATE TABLE kn_quality_equipment_exception_data (
  id varchar(255) DEFAULT NULL COMMENT '主键',
  device_id varchar(255) DEFAULT NULL COMMENT '设备ID',
  device_name varchar(255) DEFAULT NULL COMMENT '设备名称',
  exception_time varchar(255) DEFAULT NULL COMMENT '异常时间',
  reason varchar(255) DEFAULT NULL COMMENT '异常原因',
  type varchar(255) DEFAULT NULL COMMENT '分类',
  person varchar(255) DEFAULT NULL COMMENT '关系人',
  etl_time varchar(255) DEFAULT NULL COMMENT 'etl时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='设备异常数据表';



CREATE TABLE kn_quality_trace_prod_order (
  ID varchar(255) DEFAULT NULL COMMENT '主键',
  etl_time varchar(255) DEFAULT NULL COMMENT '时间戳',
  projectname_s varchar(150) DEFAULT NULL COMMENT '项目名称',
  wbsname_s varchar(255) DEFAULT NULL COMMENT '列次',
  workorderno_s varchar(20) DEFAULT NULL COMMENT '订单号',
  wbsnumber_s varchar(255) DEFAULT NULL COMMENT 'wbs号',
  partno_s varchar(20) DEFAULT NULL COMMENT '物料号',
  planstarttime_t date DEFAULT NULL COMMENT '计划开始时间',
  planendtime_t date DEFAULT NULL COMMENT '计划结束时间',
  actualstarttime_t date DEFAULT NULL COMMENT '实际开始时间',
  actualendtime_t date DEFAULT NULL COMMENT '实际结束时间',
  orderstate_s varchar(255) DEFAULT NULL COMMENT '订单状态',
  prolinename_s varchar(255) DEFAULT NULL COMMENT '产线',
  orderno_s varchar(255) DEFAULT NULL COMMENT '工单号',
  routeoperanumber_s varchar(255) DEFAULT NULL COMMENT '工序编号',
  routeoperaname_s varchar(255) DEFAULT NULL COMMENT '工序名称',
  userno_s varchar(255) DEFAULT NULL COMMENT '操作人员工号',
  creator_s varchar(255) DEFAULT NULL COMMENT '操作人员名称',
  skill_s varchar(255) DEFAULT NULL COMMENT '人员技能资质',
  deviceid_s varchar(255) DEFAULT NULL COMMENT '设备编号',
  mainrescode_s varchar(255) DEFAULT NULL COMMENT '设备名称',
  locationnumber_s varchar(255) DEFAULT NULL COMMENT '执行工位编号',
  wcname_s varchar(255) DEFAULT NULL COMMENT '执行工位名称',
  comment1_s varchar(255) DEFAULT NULL COMMENT '备料状态',
  comment2_s varchar(255) DEFAULT NULL COMMENT '配送状态',
  isjobworking_s varchar(255) DEFAULT NULL COMMENT '报工状态',
  producer_s varchar(255) DEFAULT NULL COMMENT '生产计划员',
  quantity_s decimal(10,2) DEFAULT NULL COMMENT '数量',
  routeno_s varchar(255) DEFAULT NULL COMMENT '工艺路线编码',
  factorynumber_s varchar(255) DEFAULT NULL COMMENT '工厂编号',
  serialname_s varchar(255) DEFAULT NULL COMMENT '产品序列号',
  partname_s varchar(200) DEFAULT NULL COMMENT '物料描述',
  figureno_s varchar(128) DEFAULT NULL COMMENT '图号'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='生产订单';



CREATE TABLE kn_quality_trace_prod_order_process (
  ID varchar(255) DEFAULT NULL COMMENT 'ID',
  etl_time varchar(255) DEFAULT NULL COMMENT '时间戳',
  orderno varchar(255) DEFAULT NULL COMMENT '订单编号',
  door varchar(2000) DEFAULT NULL COMMENT '门板序列号',
  checkbatch varchar(255) DEFAULT NULL COMMENT '检验批次',
  starttime date DEFAULT NULL COMMENT '检验开始时间',
  endtime date DEFAULT NULL COMMENT '检验结束时间',
  checkuserstate varchar(255) DEFAULT NULL COMMENT '质检人员状态',
  userno varchar(255) DEFAULT NULL COMMENT '质检人员编号',
  username varchar(255) DEFAULT NULL COMMENT '质检人员名称',
  testproname varchar(255) DEFAULT NULL COMMENT '检验方案名称',
  wbsno_s varchar(255) DEFAULT NULL COMMENT 'wbs项目号',
  projectname_s varchar(255) DEFAULT NULL COMMENT '项目名称',
  columnnumber varchar(255) DEFAULT NULL COMMENT '列次',
  part_number varchar(255) DEFAULT NULL COMMENT '料号',
  partname_s varchar(255) DEFAULT NULL COMMENT '物料描述',
  figureno_s varchar(255) DEFAULT NULL COMMENT '图号',
  planstarttime_t date DEFAULT NULL COMMENT '计划开始时间',
  planendtime_t date DEFAULT NULL COMMENT '计划结束时间',
  producer_s varchar(255) DEFAULT NULL COMMENT '生产计划员',
  quantity_s decimal(10,2) DEFAULT NULL COMMENT '数量',
  orderstate_s varchar(255) DEFAULT NULL COMMENT '订单状态',
  routeno_s varchar(255) DEFAULT NULL COMMENT '工艺路线编码',
  factorynumber_s varchar(255) DEFAULT NULL COMMENT '工厂编号'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='生产订单--过程记录表';



CREATE TABLE kn_quality_trace_prod_order_route (
  ID varchar(255) DEFAULT NULL COMMENT 'ID',
  etl_time varchar(255) DEFAULT NULL COMMENT '时间戳',
  orderno varchar(255) DEFAULT NULL COMMENT '订单编号',
  checkbatch varchar(255) DEFAULT NULL COMMENT '检验批次',
  starttime date DEFAULT NULL COMMENT '检验开始时间',
  endtime date DEFAULT NULL COMMENT '检验结束时间',
  checkusername varchar(255) DEFAULT NULL COMMENT '质检人员',
  checktime date DEFAULT NULL COMMENT '质检时间',
  checkstate varchar(255) DEFAULT NULL COMMENT '质检状态',
  wbsno_s varchar(255) DEFAULT NULL COMMENT 'wbs项目号',
  projectname varchar(255) DEFAULT NULL COMMENT '项目名称',
  partno_s varchar(255) DEFAULT NULL COMMENT '料号',
  partname_s varchar(255) DEFAULT NULL COMMENT '物料描述',
  figureno_s varchar(255) DEFAULT NULL COMMENT '图号',
  planstarttime_t date DEFAULT NULL COMMENT '计划开始时间',
  planendtime_t date DEFAULT NULL COMMENT '计划结束时间',
  quantity_s decimal(20,2) DEFAULT NULL COMMENT '订单数量',
  producer_s varchar(255) DEFAULT NULL COMMENT '生产管理员',
  orderstate_s varchar(255) DEFAULT NULL COMMENT '订单状态',
  routeno_s varchar(255) DEFAULT NULL COMMENT '工艺路线编码',
  factorynumber_s varchar(255) DEFAULT NULL COMMENT '工厂编号'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='生产订单--工序检验记录表';



CREATE TABLE kn_quality_trace_prod_order_self (
  ID varchar(255) DEFAULT NULL COMMENT 'ID',
  etl_time varchar(255) DEFAULT NULL COMMENT '时间戳',
  workordernumber_s varchar(255) DEFAULT NULL COMMENT '工单号',
  testtype_s varchar(255) DEFAULT NULL COMMENT '检验类型',
  sampleno_s varchar(255) DEFAULT NULL COMMENT '样本编号',
  samplingnum_s varchar(255) DEFAULT NULL COMMENT '抽样标准编号',
  serialname_s varchar(255) DEFAULT NULL COMMENT '产品序列号',
  routeoperanumber_s varchar(255) DEFAULT NULL COMMENT '工序编号',
  routeoperaname_s varchar(255) DEFAULT NULL COMMENT '工序名称',
  testcount_s decimal(10,0) DEFAULT NULL COMMENT '质检次数',
  testsortname_s varchar(255) DEFAULT NULL COMMENT '检验名称',
  testdescription_s varchar(500) DEFAULT NULL COMMENT '检验内容',
  parametername_s varchar(1000) DEFAULT NULL COMMENT '检验要求',
  testsortupcheck_s varchar(255) DEFAULT NULL COMMENT '检验结果',
  creator_s varchar(255) DEFAULT NULL COMMENT '检验人',
  testvalue_s varchar(255) DEFAULT NULL COMMENT '实际值',
  remarks_s varchar(255) DEFAULT NULL COMMENT '备注',
  checkstartdatetime_t date DEFAULT NULL COMMENT '检验开始时间',
  checkenddatetime_t date DEFAULT NULL COMMENT '检验结束时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='生产订单--自互检和完工检';




CREATE TABLE kn_quality_process_change_flow (
  id varchar(255) DEFAULT NULL COMMENT '记录的唯一标识',
  requestid varchar(255) DEFAULT NULL COMMENT 'oa流程请求id',
  bh varchar(255) DEFAULT NULL COMMENT '变更单编号',
  xmmc varchar(255) DEFAULT NULL COMMENT '项目名称',
  cpxh varchar(255) DEFAULT NULL COMMENT '产品型号',
  gcmc varchar(255) DEFAULT NULL COMMENT '过程名称',
  wjmcbh text COMMENT '文件名称/编号',
  sqbm varchar(255) DEFAULT NULL COMMENT '申请部门',
  sqr varchar(255) DEFAULT NULL COMMENT '申请人',
  rq varchar(255) DEFAULT NULL COMMENT '申请日期',
  bgyy text COMMENT '变更原因',
  bglb varchar(255) DEFAULT NULL COMMENT '变更类别',
  bgfasq text COMMENT '变更方案申请',
  psyj text COMMENT '工艺工程师意见',
  fayzjl text COMMENT '法规与质量经理审批意见',
  psspyj text COMMENT '生产审批意见',
  bgsjcpfwjlcplshzpch text COMMENT '变更涉及的产品范围及处理措施',
  bgssqksfazfabgcpsffhyq varchar(255) DEFAULT NULL COMMENT '变更是否按fai要求执行',
  jhzg varchar(255) DEFAULT NULL COMMENT '计划主管',
  scglbbc varchar(255) DEFAULT NULL COMMENT '生产管理部',
  gzr varchar(255) DEFAULT NULL COMMENT '工作责任人',
  pzr varchar(255) DEFAULT NULL COMMENT '批准人',
  cpgys varchar(255) DEFAULT NULL COMMENT '产品供应商',
  zjhjjd text COMMENT '主机或关键节点信息',
  cbfxs text COMMENT '成本分析师',
  zlgcs varchar(255) DEFAULT NULL COMMENT '质量工程师',
  cggcs varchar(255) DEFAULT NULL COMMENT '采购工程师',
  xmjl varchar(255) DEFAULT NULL COMMENT '项目经理',
  gygcs varchar(255) DEFAULT NULL COMMENT '工艺工程师',
  cptygyhlxjjsyqqr text COMMENT '产品图样工艺合理性及技术要求确认',
  cptyzzjhjyqdfhxqr text COMMENT '产品图纸及技术要求的符合性确认',
  cbgkyqqr text COMMENT '成本管控要求确认',
  sfxycxjxfaippazlgkyqqrpqr text COMMENT '是否需要重新进行fai/ppa/质量管控要求确认',
  sjwlcgzqqr text COMMENT '实际物流采购周期确认',
  mzjqyqqr text COMMENT '满足交期要求确认',
  psjggy text COMMENT '工艺结果意见',
  psjghj text COMMENT '环境结果意见',
  psjgcb text COMMENT '成本结果意见',
  psjgzl text COMMENT '质量结果意见',
  psjgcg text COMMENT '采购结果意见',
  psjgjq text COMMENT '交期结果意见',
  pgyjgy text COMMENT '批准意见-工艺',
  pgyjhj text COMMENT '批准意见-环境',
  pgyjcb text COMMENT '批准意见-成本',
  pgyjzl text COMMENT '批准意见-质量',
  pgyjcg text COMMENT '批准意见-采购',
  pgyjjq text COMMENT '批准意见-交期',
  gyyqth varchar(255) DEFAULT NULL COMMENT '工艺要求提出',
  hjyqth varchar(255) DEFAULT NULL COMMENT '环境要求提出',
  cbyqth varchar(255) DEFAULT NULL COMMENT '成本要求提出',
  zlyqth varchar(255) DEFAULT NULL COMMENT '质量要求提出',
  cgyqth varchar(255) DEFAULT NULL COMMENT '采购要求提出',
  jqyqth varchar(255) DEFAULT NULL COMMENT '交期要求提出',
  fj varchar(255) DEFAULT NULL COMMENT '附件',
  fj1 varchar(255) DEFAULT NULL COMMENT '附件1',
  bggzjg text COMMENT '变更工作结果',
  lcsc varchar(255) DEFAULT NULL COMMENT '流程状态'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='生产过程变更流程表';




CREATE TABLE kn_quality_supplier_change_approval_form (
  id varchar(255) DEFAULT NULL COMMENT '主键ID，每条记录的唯一标识',
  requestid varchar(255) DEFAULT NULL COMMENT '请求ID，与流程系统中的请求编号关联',
  sqr varchar(255) DEFAULT NULL COMMENT '申请人ID',
  sqbm varchar(255) DEFAULT NULL COMMENT '申请部门ID',
  sqdw varchar(255) DEFAULT NULL COMMENT '申请单位ID',
  sqrq varchar(255) DEFAULT NULL COMMENT '申请日期，格式如 YYYY-MM-DD',
  lcbh varchar(255) DEFAULT NULL COMMENT '流程编号',
  sjxmmc varchar(255) DEFAULT NULL COMMENT '所属项目名称',
  xmbh varchar(255) DEFAULT NULL COMMENT '项目编号',
  ygys varchar(255) DEFAULT NULL COMMENT '原供应商名称',
  xgys varchar(255) DEFAULT NULL COMMENT '新供应商名称',
  bgyy varchar(255) DEFAULT NULL COMMENT '变更原因',
  zl int DEFAULT NULL COMMENT '质量是否合格（1=合格，0=不合格）',
  cb int DEFAULT NULL COMMENT '成本是否合理（1=合理，0=不合理）',
  jq int DEFAULT NULL COMMENT '交付是否及时（1=及时，0=不及时）',
  qtsmzl varchar(255) DEFAULT NULL COMMENT '其他说明-质量相关补充说明',
  qtsmcb varchar(255) DEFAULT NULL COMMENT '其他说明-成本相关补充说明',
  qtsmjq varchar(255) DEFAULT NULL COMMENT '其他说明-交付相关补充说明',
  fj varchar(255) DEFAULT NULL COMMENT '附件信息',
  sjbmjsjl varchar(255) DEFAULT NULL COMMENT '设计部门技术经理',
  xmglbmjl varchar(255) DEFAULT NULL COMMENT '项目管理部门经理',
  yxjl varchar(255) DEFAULT NULL COMMENT '运营经理意见',
  gnbagjj int DEFAULT NULL COMMENT '是否归入国家补贴项目（1=是，0=否）',
  sfgjj int DEFAULT NULL COMMENT '是否国家计划项目（1=是，0=否）',
  sfyzj int DEFAULT NULL COMMENT '是否有验证记录（1=已验证，0=未验证）',
  ygysbm varchar(255) DEFAULT NULL COMMENT '原供应商编码',
  xgysbm varchar(255) DEFAULT NULL COMMENT '新供应商编码',
  dwbm varchar(255) DEFAULT NULL COMMENT '单位编码',
  wlyt int DEFAULT NULL COMMENT '物料用途（数值代码表示不同用途）',
  bglb varchar(255) DEFAULT NULL COMMENT '变更类别（数值代码表示变更类型）',
  gylzlglssqe varchar(255) DEFAULT NULL COMMENT '工艺质量流程是否确认',
  ljmc varchar(255) DEFAULT NULL COMMENT '零件名称',
  ggth varchar(255) DEFAULT NULL COMMENT '规格图号',
  lx varchar(255) DEFAULT NULL COMMENT '类型',
  cglb varchar(255) DEFAULT NULL COMMENT '采购类别',
  bm varchar(255) DEFAULT NULL COMMENT '编码'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='供方变更审批单';



CREATE TABLE kn_quality_trace_bom_data (
  id varchar(64) DEFAULT NULL COMMENT '主键id',
  etl_time varchar(32) DEFAULT NULL COMMENT '时间戳',
  order_number varchar(20) DEFAULT NULL COMMENT '订单编号',
  material_number varchar(20) DEFAULT NULL COMMENT '物料编号',
  plant_code varchar(10) DEFAULT NULL COMMENT '工厂编号',
  batch varchar(20) DEFAULT NULL COMMENT '批次',
  material_description varchar(64) DEFAULT NULL COMMENT '物料描述',
  required_quantity decimal(20,2) DEFAULT NULL COMMENT '需求数量',
  inventory_location varchar(20) DEFAULT NULL COMMENT '库存地点',
  procurement_type varchar(10) DEFAULT NULL COMMENT '采购类型',
  phantom_indicator varchar(10) DEFAULT NULL COMMENT '虚拟件标识',
  delivery_no varchar(100) DEFAULT NULL COMMENT '送货单号',
  batch_created_date varchar(20) DEFAULT NULL COMMENT '批量建立日期',
  inspection_lot varchar(20) DEFAULT NULL COMMENT '检验批',
  creator varchar(20) DEFAULT NULL COMMENT '创建者',
  creation_date varchar(20) DEFAULT NULL COMMENT '创建日期',
  inspection_start_date varchar(20) DEFAULT NULL COMMENT '检验开始日期',
  inspection_end_date varchar(20) DEFAULT NULL COMMENT '检验结束日期',
  creation_time varchar(20) DEFAULT NULL COMMENT '创建时间',
  long_term_feature varchar(20) DEFAULT NULL COMMENT '长期特性',
  short_term_feature varchar(20) DEFAULT NULL COMMENT '短期特性',
  inspection_lot_quantity decimal(20,2) DEFAULT NULL COMMENT '检验批数量（总数量）',
  unit_of_measure varchar(20) DEFAULT NULL COMMENT '计量单位',
  supplier_code varchar(20) DEFAULT NULL COMMENT '供应商',
  supplier_name varchar(64) DEFAULT NULL COMMENT '供应商名称',
  sampling_quantity decimal(20,2) DEFAULT NULL COMMENT '采样数量',
  defect_quantity decimal(20,2) DEFAULT NULL COMMENT '缺陷数量',
  inspector varchar(20) DEFAULT NULL COMMENT '检验人员',
  receiver_name varchar(20) DEFAULT NULL COMMENT '收货人',
  ebeln varchar(200) DEFAULT NULL COMMENT '采购订单号',
  system_status varchar(10) DEFAULT NULL COMMENT '系统状态',
  language_code varchar(10) DEFAULT NULL COMMENT '语言代码',
  inventory_position varchar(20) DEFAULT NULL COMMENT '库存位置',
  in_inspection_stock decimal(20,2) DEFAULT NULL COMMENT '质检中库存数',
  frozen_stock decimal(20,2) DEFAULT NULL COMMENT '冻结的库存数',
  unrestricted_stock decimal(20,2) DEFAULT NULL COMMENT '非限制使用库存数',
  order_drawing_version varchar(20) DEFAULT NULL COMMENT '订单图纸版本',
  current_drawing_version varchar(20) DEFAULT NULL COMMENT '当前图纸版本',
  zzthzq varchar(100) DEFAULT NULL COMMENT '图号'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='bom主数据';



CREATE TABLE kn_quality_trace_bom_data_fault (
  etl_time varchar(255) DEFAULT NULL COMMENT '时间戳',
  projectname_s varchar(255) DEFAULT NULL COMMENT '项目名称',
  wbsname_s varchar(255) DEFAULT NULL COMMENT '列次',
  wbsno_s varchar(255) DEFAULT NULL COMMENT 'wbs号',
  workorderno_s varchar(255) DEFAULT NULL COMMENT '订单号',
  partno_s varchar(255) DEFAULT NULL COMMENT '物料号',
  partname_s varchar(255) DEFAULT NULL COMMENT '物料描述',
  figureno_s varchar(255) DEFAULT NULL COMMENT '图号',
  serialno_s varchar(255) DEFAULT NULL COMMENT '机构编号',
  railwayno varchar(255) DEFAULT NULL COMMENT '追溯件编号',
  zs_figureno_s varchar(255) DEFAULT NULL COMMENT '追溯件图号',
  partno varchar(255) DEFAULT NULL COMMENT '子部件编号',
  partname varchar(255) DEFAULT NULL COMMENT '子部件名称'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='bom数据--故障批次涉及范围';



CREATE TABLE kn_quality_trace_bom_data_supplier (
  etl_time varchar(32) DEFAULT NULL COMMENT '时间戳',
  id varchar(32) DEFAULT NULL COMMENT '报告ID',
  report_no varchar(32) DEFAULT NULL COMMENT '报告单号',
  delivery_order_id varchar(32) DEFAULT NULL COMMENT '发货单id',
  delivery_order_no varchar(32) DEFAULT NULL COMMENT '发货单号',
  order_id varchar(32) DEFAULT NULL COMMENT '订单id',
  order_no varchar(32) DEFAULT NULL COMMENT '订单单号',
  batch varchar(32) DEFAULT NULL COMMENT '批次号',
  status varchar(1) DEFAULT NULL COMMENT '单据状态0新建1已提交2已驳回3完成',
  result varchar(1) DEFAULT NULL COMMENT '合格判定0待处理1合格2不合格',
  sup_result varchar(10) DEFAULT NULL COMMENT '供方最终判定0待处理1合格2不合格3让步',
  concess_no varchar(32) DEFAULT NULL COMMENT '让步单号',
  material_code varchar(50) DEFAULT NULL COMMENT '物料编码',
  material_name varchar(128) DEFAULT NULL COMMENT '物料名称',
  factory varchar(32) DEFAULT NULL COMMENT '工厂',
  sup_company_id varchar(32) DEFAULT NULL COMMENT '供应商id',
  sup_company_sap_code varchar(32) DEFAULT NULL COMMENT '供应商编码',
  sup_company_name varchar(255) DEFAULT NULL COMMENT '供应商名称',
  quality decimal(18,3) DEFAULT NULL COMMENT '数量',
  appear_sample_quality decimal(18,3) DEFAULT NULL COMMENT '供方外观性能检验抽检数量',
  appear_review_quality decimal(18,3) DEFAULT NULL COMMENT '康尼外观性能检验复核数量',
  size_sample_quality decimal(18,3) DEFAULT NULL COMMENT '供方尺寸检验抽检数量',
  size_review_quality decimal(18,3) DEFAULT NULL COMMENT '康尼尺寸检验复核数量',
  figure_type varchar(50) DEFAULT NULL COMMENT '图号',
  create_time timestamp(6) NULL DEFAULT NULL COMMENT '创建时间',
  update_time timestamp(6) NULL DEFAULT NULL COMMENT '更新时间',
  create_user varchar(32) DEFAULT NULL COMMENT '供方检验员',
  inspector varchar(32) DEFAULT NULL COMMENT '康尼检验员',
  sup_remark varchar(500) DEFAULT NULL COMMENT '供方备注',
  remark varchar(500) DEFAULT NULL COMMENT '备注',
  submit_time timestamp(6) NULL DEFAULT NULL COMMENT '提交日期',
  review_time timestamp(6) NULL DEFAULT NULL COMMENT '复核日期',
  data_version decimal(10,0) DEFAULT NULL COMMENT '报告版本号',
  item_no varchar(10) DEFAULT NULL COMMENT '报告行号',
  item_type varchar(64) DEFAULT NULL COMMENT '项点分类',
  item_name varchar(500) DEFAULT NULL COMMENT '项点名称',
  base_value varchar(50) DEFAULT NULL COMMENT '基准值',
  upper_deviate varchar(50) DEFAULT NULL COMMENT '上偏差',
  lower_deviate varchar(50) DEFAULT NULL COMMENT '下偏差',
  unit varchar(50) DEFAULT NULL COMMENT '单位',
  measure_value varchar(50) DEFAULT NULL COMMENT '实测值(供方)',
  review_value varchar(255) DEFAULT NULL COMMENT '复核值(检验员)',
  conclusion varchar(255) DEFAULT NULL COMMENT '检验结论（默认1）',
  item_remark varchar(255) DEFAULT NULL COMMENT '报告-康尼备注',
  item_sup_remark varchar(255) DEFAULT NULL COMMENT '报告-供方备注',
  item_create_time timestamp(6) NULL DEFAULT NULL COMMENT '报告-创建时间',
  item_update_time timestamp(6) NULL DEFAULT NULL COMMENT '报告-更新时间',
  item_data_version decimal(10,0) DEFAULT NULL COMMENT '报告-版本号',
  item_is_history varchar(1) DEFAULT NULL COMMENT '报告-历史',
  file_type varchar(32) DEFAULT NULL COMMENT '文件类别',
  file_name varchar(128) DEFAULT NULL COMMENT '文件名称',
  attachment text COMMENT '附件',
  file_remark varchar(255) DEFAULT NULL COMMENT '备注',
  file_create_time datetime DEFAULT NULL COMMENT '文件-创建时间',
  file_create_user varchar(32) DEFAULT NULL COMMENT '文件-创建人',
  file_data_version decimal(10,0) DEFAULT NULL COMMENT '文件-版本号',
  file_is_history varchar(1) DEFAULT NULL COMMENT '文件-历史'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='bom数据--供方检验报告';



CREATE TABLE kn_quality_trace_fault_part_load (
  etl_time varchar(255) DEFAULT NULL COMMENT '时间戳',
  id varchar(255) DEFAULT NULL COMMENT 'id唯一标识',
  car_no varchar(255) DEFAULT NULL COMMENT '车号（批量整改可能会用）',
  vehicle_code varchar(255) DEFAULT NULL COMMENT '车辆编号',
  start_online_time date DEFAULT NULL COMMENT '上线时间',
  vehicle_type varchar(255) DEFAULT NULL COMMENT '车辆状态',
  vehicle_type_name varchar(255) DEFAULT NULL COMMENT '车辆状态名称',
  project_id varchar(255) DEFAULT NULL COMMENT '项目id',
  project_code varchar(255) DEFAULT NULL COMMENT '项目编号',
  project_name varchar(255) DEFAULT NULL COMMENT '项目名称',
  act_process_id varchar(255) DEFAULT NULL COMMENT '流程实例id',
  create_by varchar(255) DEFAULT NULL COMMENT '创建人',
  create_date date DEFAULT NULL COMMENT '创建时间',
  update_by varchar(255) DEFAULT NULL COMMENT '更新人',
  update_date date DEFAULT NULL COMMENT '更新时间',
  remarks varchar(1000) DEFAULT NULL COMMENT '备注',
  del_flag varchar(255) DEFAULT NULL COMMENT '删除标识 (0:正常, 1:删除)',
  tenant_id varchar(255) DEFAULT NULL COMMENT '租户id',
  plant_id varchar(255) DEFAULT NULL COMMENT '工厂id',
  corp_id varchar(255) DEFAULT NULL COMMENT '公司id',
  org_id varchar(255) DEFAULT NULL COMMENT '组织机构id',
  vehicle_door_number decimal(20,0) DEFAULT NULL COMMENT '车门数',
  door_id varchar(64) DEFAULT NULL COMMENT 'id唯一标识',
  vehicle_door_id varchar(64) DEFAULT NULL COMMENT '车门编号',
  vehicle_id varchar(64) DEFAULT NULL COMMENT '车辆id',
  vehicle_door_type varchar(200) DEFAULT NULL COMMENT '车门类型',
  door_number varchar(64) DEFAULT NULL COMMENT '门序号',
  vehicle_door_organization_number varchar(500) DEFAULT NULL COMMENT '门机构序列号',
  door_controller_number varchar(500) DEFAULT NULL COMMENT '门控器序列号',
  door_controller_version varchar(64) DEFAULT NULL COMMENT '门控器版本号',
  vehicle_left_door_number varchar(500) DEFAULT NULL COMMENT '左门板序列号',
  vehicle_right_door_number varchar(500) DEFAULT NULL COMMENT '右门板序列号',
  train_number varchar(64) DEFAULT NULL COMMENT '车列号',
  product_type varchar(1000) DEFAULT NULL COMMENT '产品型号',
  product_name varchar(2000) DEFAULT NULL COMMENT '产品型号+子项目名称',
  order_number varchar(64) DEFAULT NULL COMMENT '序号',
  record_time date DEFAULT NULL COMMENT '记录时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='故障件装车信息--装车信息';



CREATE TABLE kn_quality_trace_history_fault_corrective (
  etl_time varchar(255) DEFAULT NULL COMMENT '时间戳',
  id varchar(255) DEFAULT NULL COMMENT '主键',
  improve_no varchar(255) DEFAULT NULL COMMENT '质量改进单号',
  question_from varchar(2) DEFAULT NULL COMMENT '问题来源 10-售后 20-ncr 30-过程不符合 40-投诉 90-其它',
  question_from_name varchar(255) DEFAULT NULL COMMENT '问题来源名称',
  question_from_id varchar(255) DEFAULT NULL COMMENT '问题来源id',
  type char(1) DEFAULT NULL COMMENT '类型 1-纠正预防 2-8d',
  type_name varchar(50) DEFAULT NULL COMMENT '类型名称',
  question_id varchar(255) DEFAULT NULL COMMENT '问题项id(源数据为空20250610)',
  question_no varchar(255) DEFAULT NULL COMMENT '问题单号',
  nature char(1) DEFAULT NULL COMMENT '问题性质 1-偶发 2-重复发生',
  nature_name varchar(50) DEFAULT NULL COMMENT '问题性质名称',
  project_id varchar(255) DEFAULT NULL COMMENT '项目id',
  project_name varchar(255) DEFAULT NULL COMMENT '项目名称',
  question_part_id varchar(255) DEFAULT NULL COMMENT '物料编码/零部件id',
  question_part_name varchar(255) DEFAULT NULL COMMENT '物料名称/零部件名称',
  material_name varchar(255) DEFAULT NULL COMMENT '产品/物料名称',
  defect_id varchar(255) DEFAULT NULL COMMENT '故障模式id（责任判定供方时）',
  defect_name varchar(255) DEFAULT NULL COMMENT '故障模式名称',
  duty_dept_id varchar(255) DEFAULT NULL COMMENT '责任部门id',
  duty_dept_name varchar(255) DEFAULT NULL COMMENT '责任部门名称',
  expect_finish_time date DEFAULT NULL COMMENT '预期完成日期',
  question_desc text COMMENT '不合格内容/描述',
  unqua_type char(1) DEFAULT NULL COMMENT '不合格类型1-产品不合格 2-过程不合格',
  unqua_type_name varchar(255) DEFAULT NULL COMMENT '不合格类型名称',
  trigger_unqua char(1) DEFAULT NULL COMMENT '过程不合是否导致产品不合格 1-是 0-否',
  trigger_unqua_name varchar(10) DEFAULT NULL COMMENT '过程不合是否导致产品不合格名称',
  attach_file_id text COMMENT '附件id多个逗号分隔',
  assign_user_id varchar(255) DEFAULT NULL COMMENT '责任部门任务分配人id',
  assign_user_name varchar(255) DEFAULT NULL COMMENT '责任部门任务分配人名称',
  dept_org_id varchar(255) DEFAULT NULL COMMENT '责任部门任务分配人部门id',
  status varchar(10) DEFAULT NULL COMMENT '状态10-保存 20-待分配 30-问题纠错 40-问题分析 50-信息审批 60-措施实施 70-验证关闭 80-完成',
  status_name varchar(255) DEFAULT NULL COMMENT '状态名称',
  submit_user_id varchar(255) DEFAULT NULL COMMENT '开立/提交人',
  submit_user_name varchar(255) DEFAULT NULL COMMENT '开立/提交人名称',
  submit_dept_name varchar(255) DEFAULT NULL COMMENT '开立/提交人部门名称',
  submit_time date DEFAULT NULL COMMENT '开立/提交时间',
  act_process_id varchar(255) DEFAULT NULL COMMENT '流程实例id',
  create_by varchar(255) DEFAULT NULL COMMENT '创建人',
  create_name varchar(255) DEFAULT NULL COMMENT '创建人名称',
  create_date date DEFAULT NULL COMMENT '创建日期',
  update_by varchar(255) DEFAULT NULL COMMENT '更新人',
  update_date date DEFAULT NULL COMMENT '更新日期',
  remarks varchar(128) DEFAULT NULL COMMENT '备注',
  del_flag char(1) DEFAULT NULL COMMENT '删除标记 0-未删除 1-已删除',
  del_flag_name varchar(10) DEFAULT NULL COMMENT '删除标识名称',
  task_user_id varchar(255) DEFAULT NULL COMMENT '任务负责人',
  task_user_name varchar(255) DEFAULT NULL COMMENT '任务负责人名称',
  cause_type_id varchar(255) DEFAULT NULL COMMENT '原因分类id',
  cause_type_name varchar(255) DEFAULT NULL COMMENT '原因分类名称',
  cause_id varchar(255) DEFAULT NULL COMMENT '原因细则id',
  cause_name varchar(255) DEFAULT NULL COMMENT '原因细则名称',
  close_time date DEFAULT NULL COMMENT '关闭日期',
  occur_cnt decimal(20,0) DEFAULT NULL COMMENT '历史发生次数',
  occur_time date DEFAULT NULL COMMENT '问题发生时间',
  supplier_id varchar(255) DEFAULT NULL COMMENT '供应商id',
  supplier_name varchar(255) DEFAULT NULL COMMENT '供应商名称',
  defect_category_id varchar(255) DEFAULT NULL COMMENT '缺陷分类id',
  defect_category_name varchar(255) DEFAULT NULL COMMENT '缺陷分类名称',
  parent_duty_id varchar(255) DEFAULT NULL COMMENT '父级责任部门id',
  parent_duty_name varchar(255) DEFAULT NULL COMMENT '父级责任部门名称',
  pending_names varchar(255) DEFAULT NULL COMMENT '当前处置人',
  self_check text COMMENT '自查自纠,水平展开',
  handle_advice text COMMENT '问题处置',
  cause_analysis text COMMENT '产生原因分析',
  correction text COMMENT '拟采取的纠正措施',
  precaution text COMMENT '拟采取的预防措施',
  analysis_name varchar(255) DEFAULT NULL COMMENT '分析人',
  audit_name varchar(255) DEFAULT NULL COMMENT '审批人',
  handle_advice_report text COMMENT '措施实施完成情况报告',
  handle_advice_name varchar(255) DEFAULT NULL COMMENT '措施实施人',
  validate_info text COMMENT '实施效果验证',
  validate_name varchar(255) DEFAULT NULL COMMENT '验证人',
  evaluate_user_id varchar(255) DEFAULT NULL COMMENT '实施效果评价人',
  evaluate_user_name varchar(255) DEFAULT NULL COMMENT '实施效果评价人名称',
  evaluate_flag char(1) DEFAULT NULL COMMENT '是否实施效果评价 0-是, 1-否',
  evaluate_flag_name varchar(10) DEFAULT NULL COMMENT '是否实施效果评价名称',
  over_time varchar(255) DEFAULT NULL COMMENT '超期天数',
  over_time_name varchar(255) DEFAULT NULL COMMENT '超期天数',
  validate_reject_count decimal(20,0) DEFAULT NULL COMMENT '验证驳回次数(默认0)',
  show_flag char(2) DEFAULT NULL COMMENT '显示状态 1-显示(默认),0-隐藏',
  show_flag_name varchar(10) DEFAULT NULL COMMENT '显示状态名称',
  related_no text COMMENT '关联问题单号',
  visible char(1) DEFAULT NULL COMMENT '显示状态',
  from_visible varchar(200) DEFAULT NULL COMMENT '问题来源显示',
  pending varchar(255) DEFAULT NULL COMMENT '下一阶段处理人'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='历史故障记录--纠正预防';



CREATE TABLE kn_quality_trace_history_fault_first (
  etl_time varchar(255) DEFAULT NULL COMMENT '时间戳',
  id varchar(255) DEFAULT NULL COMMENT 'id',
  create_date date DEFAULT NULL COMMENT '创建时间',
  plan_id varchar(255) DEFAULT NULL COMMENT '首件鉴定计划id',
  plan_detail_id varchar(255) DEFAULT NULL COMMENT '首件鉴定计划内容id',
  fai_no varchar(255) DEFAULT NULL COMMENT 'fai单号',
  attach_file_id text COMMENT '附件id多个逗号分隔',
  attach_file_name text COMMENT '附件名称多个逗号分隔',
  complete_time date DEFAULT NULL COMMENT '实际完成时间',
  inspect_finish_time date DEFAULT NULL COMMENT '鉴定最终完成时间 非单据完成时间',
  plan_code varchar(255) DEFAULT NULL COMMENT '计划单号',
  submit_user_id varchar(255) DEFAULT NULL COMMENT '策划/计划/提交人',
  submit_user_name varchar(255) DEFAULT NULL COMMENT '策划/计划/提交人名称',
  project_name varchar(255) DEFAULT NULL COMMENT '项目名称',
  drawing_no text COMMENT '图号',
  part_name text COMMENT '产品/部件名称',
  belong_to varchar(255) DEFAULT NULL COMMENT '所属',
  belong_name varchar(255) DEFAULT NULL COMMENT '所属名称',
  duty_user_id varchar(255) DEFAULT NULL COMMENT 'fai负责人',
  duty_user_name varchar(255) DEFAULT NULL COMMENT 'fai负责人名称',
  expect_time date DEFAULT NULL COMMENT '预期时间',
  material_code text COMMENT '物料编码 多个逗号分隔',
  main_size text COMMENT '技术规范',
  performance text COMMENT '主要功能/性能',
  part_type varchar(255) DEFAULT NULL COMMENT '部件类别 a,b,c',
  appraisal_department varchar(255) DEFAULT NULL COMMENT '鉴定部门',
  fai_result varchar(255) DEFAULT NULL COMMENT 'fai结果0-不通过 1-有条件通过 8-通过',
  re_inspect_result varchar(255) DEFAULT NULL COMMENT '复检结果0-不通过 1-有条件通过 8-通过',
  status varchar(255) DEFAULT NULL COMMENT '状态20-待fai 30-待fai复检 40-后续处置 80-关闭',
  status_name varchar(255) DEFAULT NULL COMMENT '状态名称',
  isborrow varchar(255) DEFAULT NULL COMMENT '是否是借用件 0-否 1-是',
  is_borrow_name varchar(255) DEFAULT NULL COMMENT '是否是借用件名称',
  refer_fai_no varchar(255) DEFAULT NULL COMMENT '借用件时fai单号',
  fai_id varchar(255) DEFAULT NULL COMMENT '借用件fai的id',
  child_project_name varchar(255) DEFAULT NULL COMMENT '子项目名称',
  task_name varchar(255) DEFAULT NULL COMMENT '任务名称',
  remarks text COMMENT '备注',
  ko_status varchar(255) DEFAULT NULL COMMENT '开口项状态 0-无 1-有未处理完 8-处理完',
  ko_status_name varchar(255) DEFAULT NULL COMMENT '开口项状态名称',
  nature_name varchar(255) DEFAULT NULL COMMENT '特性 10-关键工艺 20-新工艺 30-新材料',
  confirm_type_name varchar(255) DEFAULT NULL COMMENT '确认方式 1-实物 2-现场',
  supplier_id varchar(255) DEFAULT NULL COMMENT '提交/策划人',
  supplier_name varchar(255) DEFAULT NULL COMMENT '提交/策划人名称',
  submit_time date DEFAULT NULL COMMENT '提交时间',
  audit_user_id varchar(255) DEFAULT NULL COMMENT '审核人',
  audit_user_name varchar(255) DEFAULT NULL COMMENT '审核人名称',
  approve_user_id varchar(255) DEFAULT NULL COMMENT '批准人',
  approve_user_name varchar(255) DEFAULT NULL COMMENT '批准人名称',
  check_reason varchar(255) DEFAULT NULL COMMENT '首件检查原因(策划时填写)',
  check_reason_name varchar(255) DEFAULT NULL COMMENT '首件检查原因名称',
  production_unit varchar(255) DEFAULT NULL COMMENT '生产单位(策划时填写)',
  main_size_item varchar(1000) DEFAULT NULL COMMENT '产品主要尺寸检查项目(策划时填写)',
  main_test_item varchar(1000) DEFAULT NULL COMMENT '主要试验项目(策划时填写)',
  pm_user_id varchar(255) DEFAULT NULL COMMENT '项目经理(内部门系统时belongto=2)(策划时填写)',
  pm_user_name varchar(255) DEFAULT NULL COMMENT '项目经理名称',
  pro_leader_id varchar(255) DEFAULT NULL COMMENT '生产主管(内部部件时belongto=1)(策划时填写)',
  pro_leader_name varchar(255) DEFAULT NULL COMMENT '生产主管名称',
  create_by varchar(255) DEFAULT NULL COMMENT '创建人',
  create_by_name varchar(255) DEFAULT NULL COMMENT '创建人名称',
  update_by varchar(255) DEFAULT NULL COMMENT '更新人',
  update_date date DEFAULT NULL COMMENT '更新时间',
  test_place varchar(255) DEFAULT NULL COMMENT '试验地点(实施时补充)',
  according_to varchar(1000) DEFAULT NULL COMMENT '首件检验依据(实施时补充)',
  version varchar(255) DEFAULT NULL COMMENT '版本(实施时补充)',
  inspect_comment text COMMENT '检验评论(实施时补充)',
  del_flag varchar(255) DEFAULT NULL COMMENT '删除标记0-未删除1-已删除',
  del_flag_name varchar(255) DEFAULT NULL COMMENT '删除标识名称',
  project_code varchar(255) DEFAULT NULL COMMENT '项目编码(鉴定信息导入)',
  finish_time date DEFAULT NULL COMMENT '完成时间',
  counter_sign_user_ids text COMMENT '会签人id',
  counter_sign_user_names text COMMENT '会签人名称'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='历史故障记录--首件鉴定';



CREATE TABLE kn_quality_trace_history_fault_info (
  etl_time varchar(200) DEFAULT NULL COMMENT '时间戳',
  id varchar(200) DEFAULT NULL,
  report_code varchar(200) DEFAULT NULL COMMENT '故障报告code',
  status varchar(2) DEFAULT NULL COMMENT '故障状态0保存1提交2结束',
  project_name varchar(200) DEFAULT NULL COMMENT '项目名称',
  project_id varchar(200) DEFAULT NULL COMMENT '故障项目名称id',
  project_code varchar(100) DEFAULT NULL COMMENT '故障项目编号',
  happen_date date DEFAULT NULL COMMENT '故障发生日期',
  vehicle_id varchar(200) DEFAULT NULL COMMENT '车辆id',
  vehicle_no varchar(200) DEFAULT NULL COMMENT '车辆编号',
  product_name varchar(200) DEFAULT NULL COMMENT '产品型号名称',
  product_id varchar(200) DEFAULT NULL COMMENT '产品型号id',
  door_no varchar(200) DEFAULT NULL COMMENT '门号',
  door_id varchar(200) DEFAULT NULL COMMENT '门号id',
  bad_num decimal(20,0) DEFAULT NULL COMMENT '故障数量',
  happen_chance varchar(200) DEFAULT NULL COMMENT '故障发生时机',
  happen_chance_name varchar(100) DEFAULT NULL COMMENT '故障发生时机名称',
  description text COMMENT '故障现象描述',
  door_sys_id varchar(200) DEFAULT NULL COMMENT '门系统故障现象',
  response_time decimal(20,0) DEFAULT NULL COMMENT '响应时间',
  service_effect_id varchar(200) DEFAULT NULL COMMENT '对服务影响',
  service_effect_name varchar(200) DEFAULT NULL COMMENT '对服务影响名称',
  vehicle_mileage decimal(20,0) DEFAULT NULL COMMENT '故障发生公里数',
  depart_flag varchar(2) DEFAULT NULL COMMENT '正线是否隔离(0-是,1-否)',
  depart_flag_name varchar(10) DEFAULT NULL COMMENT '正线是否隔离名称',
  other_condition varchar(200) DEFAULT NULL COMMENT '其他故障判断条件',
  baj_flag varchar(2) DEFAULT NULL COMMENT '是否保安监（0 是 1 否）',
  baj_flag_name varchar(10) DEFAULT NULL COMMENT '是否保安监名称',
  delay_time decimal(20,0) DEFAULT NULL COMMENT '列次延误时间（分钟）',
  delay_second decimal(20,0) DEFAULT NULL COMMENT '列次延误时间(秒)',
  safe_effect varchar(200) DEFAULT NULL COMMENT '是否影响安全',
  result varchar(2) DEFAULT NULL COMMENT '故障严重性等级结论（0 一般 1 重要 2 严重）',
  result_name varchar(10) DEFAULT NULL COMMENT '故障严重性等级结论名称',
  attach_video_id text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,
  attach_video_name text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,
  attach_file_name text COMMENT '附属文件名称',
  attach_file_id text COMMENT '附属文件id',
  attach_image_name text COMMENT '图片名称',
  attach_image_id text COMMENT '图片id',
  act_process_id varchar(200) DEFAULT NULL COMMENT '流程实例id',
  create_by varchar(200) DEFAULT NULL COMMENT '创建者',
  create_name varchar(200) DEFAULT NULL COMMENT '创建者名称',
  create_date date DEFAULT NULL COMMENT '创建时间',
  update_by varchar(200) DEFAULT NULL,
  update_date date DEFAULT NULL COMMENT '更新时间',
  remarks varchar(200) DEFAULT NULL,
  del_flag varchar(1) DEFAULT NULL COMMENT '0(默认)',
  del_flag_name varchar(10) DEFAULT NULL COMMENT '删除标识名称',
  week_of_year varchar(200) DEFAULT NULL COMMENT '开立时间是一年的第几周--统计分析用',
  zd_repeat_flag varchar(2) DEFAULT NULL COMMENT '故障诊断-故障是否复现 1-是(默认),0-否',
  zd_repeat_flag_name varchar(10) DEFAULT NULL COMMENT '故障诊断-故障是否复现名称',
  zd_zero_part_name varchar(200) DEFAULT NULL COMMENT '故障诊断-故障零部件名称',
  zd_zero_part_id varchar(200) DEFAULT NULL COMMENT '故障诊断-故障零部件',
  zd_model_id varchar(200) DEFAULT NULL COMMENT '故障诊断-故障模式',
  zd_model_name varchar(200) DEFAULT NULL COMMENT '故障诊断-故障模式名称',
  zd_door_sn_right varchar(200) DEFAULT NULL COMMENT '故障诊断-右门板序列号',
  zd_door_sn_left varchar(200) DEFAULT NULL COMMENT '故障诊断-门板序列号 左门',
  zd_control_id varchar(200) DEFAULT NULL COMMENT '故障诊断-门控制器序列号',
  zd_org_sn varchar(255) DEFAULT NULL COMMENT '故障诊断-机构序列号',
  zd_fault_sn text COMMENT '故障诊断-故障件序列号',
  zd_process text COMMENT '故障诊断-故障诊断过程',
  zd_history_times decimal(20,0) DEFAULT NULL COMMENT '故障诊断-历史次数(默认0)',
  zd_last_time date DEFAULT NULL COMMENT '故障诊断-最有一次时间',
  zd_fault_code varchar(200) DEFAULT NULL COMMENT '故障诊断-故障代码',
  zd_time decimal(20,0) DEFAULT NULL COMMENT '故障诊断-诊断时间',
  zd_finish_time date DEFAULT NULL COMMENT '故障诊断-诊断完成时间',
  zd_code_name varchar(500) DEFAULT NULL COMMENT '故障诊断-故障代码名称',
  zd_code_id varchar(500) DEFAULT NULL COMMENT '故障诊断-故障代码文件id',
  zd_image_name text COMMENT '故障诊断-图片名称',
  zd_image_id text COMMENT '故障诊断-图片id',
  zd_file_name text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,
  xc_change_flag varchar(2) DEFAULT NULL COMMENT '是否更换件 0是1 否',
  xc_change_flag_name varchar(10) DEFAULT NULL COMMENT '是否更换件名称',
  zd_file_id text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,
  zd_create_date date DEFAULT NULL,
  zd_create_by varchar(200) DEFAULT NULL,
  zd_create_name varchar(200) DEFAULT NULL COMMENT '故障诊断-创建人名称',
  xc_next_user varchar(200) DEFAULT NULL COMMENT '现场处置-下一步处置人',
  xc_next_user_name varchar(200) DEFAULT NULL COMMENT '现场处置-下一步处置人名称',
  xc_histoty_id varchar(200) DEFAULT NULL COMMENT '现场处置-历史处置方案',
  xc_defend_number decimal(20,0) DEFAULT NULL COMMENT '现场处置-纠正性维护人数',
  xc_act_type varchar(200) DEFAULT NULL COMMENT '现场处置-维护活动类型',
  xc_fault_time decimal(20,0) DEFAULT NULL COMMENT '现场处置-故障维修时间 分钟',
  xc_act_content text COMMENT '现场处置-故障处置活动',
  xc_back_flag varchar(2) DEFAULT NULL COMMENT '现场处置-故障件是否退回0是1否',
  xc_back_flag_name varchar(10) DEFAULT NULL COMMENT '现场处置-故障件是否退回名称',
  xc_finish_time date DEFAULT NULL COMMENT '现场处置-处置完成时间',
  xc_handle_time decimal(20,0) DEFAULT NULL COMMENT '现场处置-故障解决时间',
  xc_create_date date DEFAULT NULL,
  xc_create_by varchar(200) DEFAULT NULL,
  xc_create_name varchar(200) DEFAULT NULL COMMENT '现场处置-创建人名称',
  xc_new_sn varchar(200) DEFAULT NULL COMMENT '现场处置-如果更换，新的部件序列号（此处存part表groupid)',
  xc_file_name text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,
  xc_file_id text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,
  yz_next_user varchar(200) DEFAULT NULL COMMENT '处置验证-后续处置人',
  yz_fault_close varchar(200) DEFAULT NULL COMMENT '处置验证-故障是否关闭',
  yz_create_date date DEFAULT NULL,
  yz_create_by varchar(200) DEFAULT NULL,
  yz_create_name varchar(200) DEFAULT NULL COMMENT '处置验证-创建人名称',
  yz_flaut_describle text COMMENT '处置验证-故障验证描述',
  pz_duty_type varchar(200) DEFAULT NULL COMMENT '故障判责-故障责任类型0内部1客户2供应商',
  pz_duty_type_name varchar(20) DEFAULT NULL COMMENT '故障判责-故障责任类型名称',
  pz_duty_name varchar(200) DEFAULT NULL COMMENT '故障判责-责任单位名称',
  pz_duty_dept varchar(200) DEFAULT NULL COMMENT '故障判责-故障责任单位',
  pz_customer_complain_flag varchar(2) DEFAULT NULL COMMENT '故障判责-是否客诉 0-否(默认), 1-是',
  pz_customer_complain_flag_name varchar(10) DEFAULT NULL COMMENT '故障判责-是否客诉名称',
  pz_inertia_problem_flag varchar(2) DEFAULT NULL COMMENT '故障判责-是否惯性问题 0-否(默认),1-是',
  pz_inertia_problem_flag_name varchar(2) DEFAULT NULL COMMENT '故障判责-是否惯性问题名称',
  better_flag varchar(1) DEFAULT NULL COMMENT '故障判责-是否触发质量改进 0是 1否(默认)',
  better_flag_name varchar(10) DEFAULT NULL COMMENT '是否触发质量改进名称',
  pz_duty_content text COMMENT '故障判责-判责说明',
  pz_inform_user_id varchar(200) DEFAULT NULL COMMENT '故障判责-责任告知人id',
  pz_inform_user_name varchar(200) DEFAULT NULL COMMENT '故障判责-责任告知人',
  pz_remarks text COMMENT '故障判责-判责备注',
  pz_file_name text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,
  pz_create_date date DEFAULT NULL,
  pz_create_by varchar(200) DEFAULT NULL,
  pz_create_name varchar(200) DEFAULT NULL COMMENT '故障判责-创建人名称',
  pz_file_id text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,
  define_flag varchar(1) DEFAULT NULL COMMENT '识别标识（0：已识别，1：未识别(默认)，2：不进行识别）',
  define_flag_name varchar(10) DEFAULT NULL COMMENT '识别标识名称',
  flag varchar(1) DEFAULT NULL COMMENT '是否保存',
  nature varchar(1) DEFAULT NULL COMMENT '问题性质 1-偶发 2-重复发生',
  nature_name varchar(10) DEFAULT NULL COMMENT '问题性质名称',
  station varchar(200) DEFAULT NULL COMMENT '所属站点',
  pz_dept_id varchar(200) DEFAULT NULL COMMENT '责任部门id',
  pz_dept_name varchar(200) DEFAULT NULL COMMENT '责任部门名称',
  plat_id varchar(200) DEFAULT NULL COMMENT '平台id',
  plat_name varchar(200) DEFAULT NULL COMMENT '平台名称',
  customer_code varchar(200) DEFAULT NULL COMMENT '客户编码',
  customer_name varchar(200) DEFAULT NULL COMMENT '客户名称',
  bureau_code varchar(200) DEFAULT NULL COMMENT '归属路局编码',
  bureau_name varchar(200) DEFAULT NULL COMMENT '归属路局名称',
  yz_better_flag varchar(1) DEFAULT NULL COMMENT '是否质量改进 0-是,1-否',
  yz_better_flag_name varchar(10) DEFAULT NULL COMMENT '是否质量改进名称',
  yz_expect_date date DEFAULT NULL COMMENT '要求改进完成时间',
  final_duty_type varchar(200) DEFAULT NULL COMMENT '最终：故障责任类型0内部1客户2供应商',
  final_duty_type_name varchar(100) DEFAULT NULL COMMENT '最终：故障责任类型名称',
  final_duty_name varchar(200) DEFAULT NULL COMMENT '最终：责任单位名称',
  final_duty_dept varchar(200) DEFAULT NULL COMMENT '最终：故障责任单位',
  final_customer_complain_flag varchar(2) DEFAULT NULL COMMENT '最终: 是否客诉 0-否, 1-是',
  final_customer_complain_flag_name varchar(10) DEFAULT NULL COMMENT '最终是否客诉名称',
  final_inertia_problem_flag varchar(2) DEFAULT NULL COMMENT '最终: 是否惯性问题 0-否,1-是',
  final_inertia_problem_flag_name varchar(10) DEFAULT NULL COMMENT '最终是否惯性问题名称',
  show_flag varchar(2) DEFAULT NULL COMMENT '显示状态 1-显示(默认),0-隐藏',
  show_flag_name varchar(10) DEFAULT NULL COMMENT '显示状态名称'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='历史故障记录';



CREATE TABLE kn_quality_trace_history_fault_inspection (
  etl_time varchar(100) DEFAULT NULL COMMENT '时间戳',
  id varchar(100) DEFAULT NULL COMMENT '主键id',
  create_by varchar(100) DEFAULT NULL COMMENT '创建人',
  create_by_name varchar(100) DEFAULT NULL COMMENT '创建人名称',
  create_date date DEFAULT NULL COMMENT '创建时间',
  update_by varchar(100) DEFAULT NULL COMMENT '更新人',
  update_date date DEFAULT NULL COMMENT '更新时间',
  del_flag char(1) DEFAULT NULL COMMENT '删除标识（0正常 1删除）',
  del_flag_name varchar(100) DEFAULT NULL COMMENT '删除标识名称',
  remarks text COMMENT '暂未启用',
  tenant_id varchar(100) DEFAULT NULL COMMENT '租户id（源表无数据20250609）',
  bill_no varchar(50) DEFAULT NULL COMMENT '整改单号（格式：yymmnnnn，年月日加四位流水）',
  chn_change_no varchar(200) DEFAULT NULL COMMENT '变更单号',
  bill_date varchar(100) DEFAULT NULL COMMENT '发起时间',
  bill_user varchar(100) DEFAULT NULL COMMENT '发起人',
  bill_user_name varchar(100) DEFAULT NULL COMMENT '发起人名称',
  bill_user_company varchar(100) DEFAULT NULL COMMENT '发起人部门',
  bill_user_company_name varchar(100) DEFAULT NULL COMMENT '发起人部门名称',
  rect_type char(1) DEFAULT NULL COMMENT '整改分类（0一般 1重大）',
  rect_type_name varchar(100) DEFAULT NULL COMMENT '整改分类名称',
  bill_type char(1) DEFAULT NULL COMMENT '单据分类（0普查 1整改）',
  bill_type_name varchar(100) DEFAULT NULL COMMENT '单据分类名称',
  general_user varchar(100) DEFAULT NULL COMMENT '总工',
  general_user_name varchar(100) DEFAULT NULL COMMENT '总工名称',
  materials_fee decimal(18,2) DEFAULT NULL COMMENT '材料费',
  rect_cause text COMMENT '整改原因',
  finishdate date DEFAULT NULL COMMENT '要求完成时间',
  comm_remark text COMMENT '客户沟通情况',
  rect_remark text COMMENT '整改要求说明',
  exe_state char(1) DEFAULT NULL COMMENT '执行状态（0启动 1暂停）',
  exe_state_name varchar(100) DEFAULT NULL COMMENT '执行状态名称',
  deal_state char(4) DEFAULT NULL COMMENT '处置状态（1000发起整改 2000其他）',
  deal_state_name varchar(100) DEFAULT NULL COMMENT '处置状态名称',
  fill_state char(2) DEFAULT NULL COMMENT '费用填写状态（10待填写 90已完成）',
  fill_state_name varchar(100) DEFAULT NULL COMMENT '费用填写状态名称',
  resp_state char(2) DEFAULT NULL COMMENT '责任判定状态（10待判定 90已完成）',
  resp_state_name varchar(100) DEFAULT NULL COMMENT '责任判定状态名称',
  sign_state char(2) DEFAULT NULL COMMENT '会签状态（10待会签 90已完成）',
  sign_state_name varchar(100) DEFAULT NULL COMMENT '会签状态名称',
  check_user varchar(100) DEFAULT NULL COMMENT '审核人id',
  check_username varchar(100) DEFAULT NULL COMMENT '审核人名称',
  approval_user varchar(100) DEFAULT NULL COMMENT '批准人id',
  approval_username varchar(100) DEFAULT NULL COMMENT '批准人名称',
  sign_user varchar(100) DEFAULT NULL COMMENT '会签人',
  sign_user_name varchar(100) DEFAULT NULL COMMENT '会签人名称',
  sqe_user varchar(100) DEFAULT NULL COMMENT '质量工程师',
  sqe_user_name varchar(100) DEFAULT NULL COMMENT '质量工程师名称',
  cs_department_user varchar(100) DEFAULT NULL COMMENT '客服部门',
  cs_department_user_name varchar(100) DEFAULT NULL COMMENT '客服部门名称',
  cs_manager_user varchar(100) DEFAULT NULL COMMENT '客户经理',
  cs_manager_user_name varchar(100) DEFAULT NULL COMMENT '客户经理名称',
  fee_remark text COMMENT '费用说明',
  resp_remark text COMMENT '责任判定说明',
  improve_no varchar(50) DEFAULT NULL COMMENT '改进单号',
  file_capa_names text COMMENT '整改措施名称组合',
  file_capa_ids text COMMENT '整改措施ids',
  file_capa_code text COMMENT '整改措施文件号',
  file_analysis_names text COMMENT '分析报告附件名称组合',
  file_analysis_ids text COMMENT '分析报告附件ids',
  file_reasons_names text COMMENT '整改原因附件名称组合',
  file_reasons_ids text COMMENT '整改原因附件ids',
  file_comm_remark_names text COMMENT '客户沟通情况附件名称组合',
  file_comm_remark_ids text COMMENT '客户沟通情况附件ids',
  material_user varchar(100) DEFAULT NULL COMMENT '物料告知人',
  material_user_name varchar(100) DEFAULT NULL COMMENT '物料告知人名称',
  rect_rate varchar(100) DEFAULT NULL COMMENT '整改完成率',
  static_status varchar(100) DEFAULT NULL COMMENT '统计状态',
  close_flag varchar(100) DEFAULT NULL COMMENT '关闭标识',
  resp_user_names varchar(100) DEFAULT NULL COMMENT '责任告知人（源表无数据20250609）',
  project_no varchar(100) DEFAULT NULL COMMENT '项目编号',
  project_name varchar(255) DEFAULT NULL COMMENT '项目名称',
  resp_interface_dept varchar(200) DEFAULT NULL COMMENT '责任部门',
  resp_interface_user varchar(200) DEFAULT NULL COMMENT '责任告知人'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='普查整改';



CREATE TABLE kn_quality_trace_history_fault_mileage_time (
  etl_time varchar(255) DEFAULT NULL COMMENT '时间戳',
  data_id varchar(255) DEFAULT NULL COMMENT '数据id(勿动)',
  project_code varchar(255) DEFAULT NULL COMMENT '项目编码',
  project_name varchar(255) DEFAULT NULL COMMENT '项目名称',
  vehicle_code varchar(255) DEFAULT NULL COMMENT '车列号',
  fill_in_date date DEFAULT NULL COMMENT '采集时间',
  run_distance varchar(255) DEFAULT NULL COMMENT '运行公里数',
  vehicle_door_number varchar(255) DEFAULT NULL COMMENT '车门数',
  start_online_time date DEFAULT NULL COMMENT '车辆上线时间',
  station_name varchar(255) DEFAULT NULL COMMENT '服务站',
  customer_service_director varchar(255) DEFAULT NULL COMMENT '客服站长',
  customer_service_manager varchar(255) DEFAULT NULL COMMENT '客服经理',
  oem_id_name varchar(255) DEFAULT NULL COMMENT '主机厂',
  plat_name varchar(100) DEFAULT NULL COMMENT '平台名称',
  zlgcs_id varchar(100) DEFAULT NULL COMMENT '质量工程师id',
  zlgcs_name varchar(100) DEFAULT NULL COMMENT '质量工程师名称',
  rn int DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='车辆运行公里数和上线时间';



CREATE TABLE kn_quality_trace_history_fault_ncr (
  etl_time varchar(100) DEFAULT NULL COMMENT '时间戳',
  id varchar(100) DEFAULT NULL COMMENT 'id',
  del_flag char(2) DEFAULT NULL COMMENT '删除标识(默认0)',
  report_code varchar(300) DEFAULT NULL COMMENT '报告编号',
  status varchar(2) DEFAULT NULL COMMENT '0保存 1进行 2 结束',
  status_name varchar(50) DEFAULT NULL COMMENT '状态名称',
  material_no varchar(255) DEFAULT NULL COMMENT '物料编号',
  material_txt varchar(500) DEFAULT NULL COMMENT '物料描述',
  product_id varchar(255) DEFAULT NULL COMMENT '产品id',
  photo_id varchar(255) DEFAULT NULL COMMENT '图号id',
  project_name varchar(200) DEFAULT NULL COMMENT '项目名称',
  project_id varchar(255) DEFAULT NULL COMMENT '项目名称id',
  happen_id varchar(100) DEFAULT NULL COMMENT '发生地点id',
  happen_name varchar(100) DEFAULT NULL COMMENT '发生地点名称',
  provider_name varchar(100) DEFAULT NULL COMMENT '供应商名称',
  provider_id varchar(100) DEFAULT NULL COMMENT '供应商id',
  duty_dept_id varchar(100) DEFAULT NULL COMMENT '责任方',
  duty_dept_name varchar(100) DEFAULT NULL COMMENT '责任方名称',
  bad_num decimal(20,0) DEFAULT NULL COMMENT '不合格数量',
  more_or_single varchar(2) DEFAULT NULL COMMENT '问题性质(批量 0 /个性 1)',
  more_or_single_name varchar(50) DEFAULT NULL COMMENT '问题性质名称',
  grade varchar(100) DEFAULT NULL COMMENT '分级',
  defect_category_id varchar(100) DEFAULT NULL COMMENT '缺陷分类id',
  defect_category_name varchar(100) DEFAULT NULL COMMENT '缺陷分类名称',
  defect_id varchar(100) DEFAULT NULL COMMENT '故障模式id',
  defect_name varchar(100) DEFAULT NULL COMMENT '故障模式名称',
  bad_describe text COMMENT '不合格描述',
  inspection_user_id varchar(100) DEFAULT NULL COMMENT '检验工程师id',
  inspection_user_name varchar(100) DEFAULT NULL COMMENT '检验工程师名称',
  plan_user_id varchar(100) DEFAULT NULL COMMENT '处置方案人id(工艺师)',
  plan_user_name varchar(100) DEFAULT NULL COMMENT '处置方案人名称',
  attach_file_name text COMMENT '文件名',
  attach_file_id text COMMENT '文件id',
  tenant_id varchar(100) DEFAULT NULL COMMENT '租户id（源表无数据20250606）',
  create_by varchar(100) DEFAULT NULL COMMENT '创建者',
  create_name varchar(100) DEFAULT NULL COMMENT '创建者名称',
  create_date datetime DEFAULT NULL COMMENT '创建时间',
  update_by varchar(100) DEFAULT NULL COMMENT '更新者',
  update_date datetime DEFAULT NULL COMMENT '更新时间',
  act_process_id varchar(255) DEFAULT NULL COMMENT '流程实例id',
  act_process_name varchar(100) DEFAULT NULL COMMENT '流程节点名称',
  type_flag varchar(2) DEFAULT NULL COMMENT '问题来源（来料0/过程1/出厂2)',
  type_name varchar(50) DEFAULT NULL COMMENT '问题来源名称',
  list_num varchar(255) DEFAULT NULL COMMENT '列数（过程出厂）',
  duty_user_id varchar(100) DEFAULT NULL COMMENT '责任检验员id（过程出厂）',
  duty_user_name varchar(100) DEFAULT NULL COMMENT '责任检验员名称',
  team_leader varchar(100) DEFAULT NULL COMMENT '班组长（过程出厂）',
  team_leader_name varchar(100) DEFAULT NULL COMMENT '班组长名称',
  fast_handle varchar(255) DEFAULT NULL COMMENT '快速处置（过程出厂）  0: 快速处置(默认)',
  handle_type varchar(255) DEFAULT NULL COMMENT '处置方式（过程出厂）',
  handle_opinion varchar(255) DEFAULT NULL COMMENT '处置意见（过程出厂）',
  class_code varchar(100) DEFAULT NULL COMMENT '品类',
  plat_form varchar(100) DEFAULT NULL COMMENT '平台',
  remarks varchar(100) DEFAULT NULL,
  order_id varchar(255) DEFAULT NULL COMMENT '生产订单号',
  inspection_id varchar(255) DEFAULT NULL COMMENT '检验批',
  happen_date date DEFAULT NULL COMMENT '发生时间',
  mes_flag varchar(10) DEFAULT NULL COMMENT '有无mes 0手动开立 1 无mes 2 有mes',
  mes_flag_name varchar(50) DEFAULT NULL COMMENT '有无MES名称',
  new_handle_type varchar(100) DEFAULT NULL COMMENT '新的处置方式（源表无数据20250606）',
  new_handle_type_flag char(2) DEFAULT NULL COMMENT '是否有新的处置方案（0有，1无，默认为无）',
  new_handle_type_flag_name varchar(50) DEFAULT NULL COMMENT '是否有新的处置方案名称',
  failed_manager varchar(100) DEFAULT NULL COMMENT '不合格品库管员(来料）',
  failed_manager_name varchar(100) DEFAULT NULL COMMENT '不合格品库管员名称',
  batch_num varchar(255) DEFAULT NULL COMMENT '批次号/序列号',
  after_date_time date DEFAULT NULL COMMENT '超时提醒时间',
  check_flag char(2) DEFAULT NULL COMMENT '是否已责任检验，1否，0是',
  check_flag_name varchar(50) DEFAULT NULL COMMENT '是否已责任检验名称',
  check_content_id varchar(100) DEFAULT NULL COMMENT '检验内容表id',
  product_flag char(2) DEFAULT NULL COMMENT '生产调度是否填写 0填写 1未填写',
  product_flag_name varchar(50) DEFAULT NULL COMMENT '生产调度是否填写名称',
  product_back_id varchar(100) DEFAULT NULL COMMENT '生产调度id',
  product_user_id varchar(100) DEFAULT NULL COMMENT '生产调度员人信息',
  product_user_name varchar(100) DEFAULT NULL COMMENT '生产调度员人名称',
  bad_confirm_flag char(2) DEFAULT NULL COMMENT '不合格品库确认flag 0确认 1没有确认',
  bad_confirm_flag_name varchar(50) DEFAULT NULL COMMENT '不合格品库确认名称',
  bad_confirm_id varchar(100) DEFAULT NULL COMMENT '不合格确认id',
  bad_user_id varchar(100) DEFAULT NULL COMMENT '不合格确认人员id',
  bad_user_name varchar(100) DEFAULT NULL COMMENT '不合格确认人员名称',
  dept_id varchar(100) DEFAULT NULL,
  dept_name varchar(100) DEFAULT NULL COMMENT '部门名称',
  affiliation varchar(100) DEFAULT NULL COMMENT '所属机构',
  affiliation_name varchar(100) DEFAULT NULL COMMENT '所属机构名称',
  interface_user varchar(50) DEFAULT NULL COMMENT '责任通知人',
  interface_user_name varchar(100) DEFAULT NULL COMMENT '责任通知人名称',
  inspect_id varchar(100) DEFAULT NULL COMMENT '检验记录id（源表无数据20250606）',
  work_type varchar(100) DEFAULT NULL COMMENT '业务类型（过程检验，完工和放行）（源表无数据20250606）',
  duty_flag char(2) DEFAULT NULL COMMENT '是否上道责任检验 0是有上道责任检验',
  duty_flag_name varchar(50) DEFAULT NULL COMMENT '是否上道责任检验名称',
  history_times decimal(20,0) DEFAULT NULL COMMENT '历史次数',
  parent_duty_id varchar(100) DEFAULT NULL COMMENT '责任部门id',
  parent_duty_name varchar(100) DEFAULT NULL COMMENT '责任部门名称',
  create_year varchar(4) DEFAULT NULL COMMENT '开立时间（年）',
  create_month varchar(8) DEFAULT NULL COMMENT '开立时间（月）',
  improve_flag char(2) DEFAULT NULL COMMENT '是否改进 0-否 1-是',
  improve_flag_name varchar(50) DEFAULT NULL COMMENT '是否改进名称',
  duty_time date DEFAULT NULL COMMENT '责任申诉通知时间',
  audit_info varchar(255) DEFAULT NULL COMMENT '审核信息',
  inform_user_id varchar(100) DEFAULT NULL COMMENT '计划员或库管员',
  inform_user_name varchar(100) DEFAULT NULL COMMENT '计划员或库管员名称',
  push_amount decimal(20,0) DEFAULT NULL COMMENT '报检数量',
  inspect_amount decimal(20,0) DEFAULT NULL COMMENT '检验数量',
  incentive_flag char(2) DEFAULT NULL COMMENT '质量考核 0-是 1-否',
  incentive_flag_name varchar(50) DEFAULT NULL COMMENT '质量考核名称',
  finish_time date DEFAULT NULL COMMENT '完成时间',
  slm_id varchar(100) DEFAULT NULL COMMENT 'slm的ncr的id',
  report_by varchar(100) DEFAULT NULL COMMENT '报告填报人',
  report_by_name varchar(100) DEFAULT NULL COMMENT '报告填报人名称',
  slm_ncr_status varchar(100) DEFAULT NULL COMMENT 'ncr变动的状态',
  slm_ncr_time date DEFAULT NULL COMMENT 'ncr变动状态的时间',
  slm_status varchar(100) DEFAULT NULL COMMENT 'slm已经接收到的状态',
  show_flag char(2) DEFAULT NULL COMMENT '显示状态 1-显示(默认),0-隐藏',
  show_flag_name varchar(50) DEFAULT NULL COMMENT '显示状态名称',
  customer_date date DEFAULT NULL COMMENT '客户传递时间',
  rectify_flag char(2) DEFAULT NULL COMMENT '是否内外部整改 1- 是, 0-否',
  rectify_flag_name varchar(50) DEFAULT NULL COMMENT '是否内外部整改名称',
  rectify_type char(2) DEFAULT NULL COMMENT '内外部整改类型 0-内部, 1-外部',
  rectify_type_name varchar(50) DEFAULT NULL COMMENT '内外部整改类型名称',
  customer_dept_leader varchar(100) DEFAULT NULL COMMENT '客服部部长',
  customer_dept_leader_name varchar(100) DEFAULT NULL COMMENT '客服部部长名称',
  rectify_tracker_id varchar(100) DEFAULT NULL COMMENT '整改跟踪人id',
  rectify_tracker_name varchar(100) DEFAULT NULL COMMENT '整改跟踪人名称',
  rectify_validator_id varchar(100) DEFAULT NULL COMMENT '整改验证关闭人id',
  rectify_validator_name varchar(100) DEFAULT NULL COMMENT '整改验证关闭人名称',
  track_id varchar(100) DEFAULT NULL COMMENT '跟踪处置表id',
  rectify_status varchar(2) DEFAULT NULL COMMENT '跟踪状态 10-整改跟踪处置,20-整改验证关闭,90-整改完成',
  rectify_status_name varchar(50) DEFAULT NULL COMMENT '跟踪状态名称',
  counter_sign_user_ids varchar(100) DEFAULT NULL COMMENT '会签人id',
  counter_sign_user_name varchar(20) DEFAULT NULL COMMENT '会签人名称',
  counter_sign_status char(2) DEFAULT NULL COMMENT '会签任务状态 0-未启动(默认),1-进入会签流程,9-会签流程完成',
  counter_sign_status_name varchar(50) DEFAULT NULL COMMENT '会签任务状态名称',
  chief_designer varchar(100) DEFAULT NULL COMMENT '技术主管',
  chief_designer_name varchar(20) DEFAULT NULL COMMENT '技术主管名称',
  qm_engineer varchar(100) DEFAULT NULL COMMENT '项目质量工程师',
  qm_engineer_name varchar(20) DEFAULT NULL COMMENT '项目质量工程师名称',
  teacher varchar(100) DEFAULT NULL COMMENT '工艺师',
  teacher_name varchar(20) DEFAULT NULL COMMENT '工艺师名称',
  quality_loss varchar(255) DEFAULT NULL COMMENT '质量损失金额(元)(默认0)'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='历史故障记录--NCR信息查询';




CREATE TABLE kn_quality_trace_history_fault_test (
  etl_time varchar(100) DEFAULT NULL COMMENT '时间戳',
  id varchar(100) DEFAULT NULL COMMENT 'ID',
  trial_no varchar(100) DEFAULT NULL COMMENT '不合格单号',
  trial_source char(1) DEFAULT NULL COMMENT '项目阶段（0型式试验 1中试 2-设计 3-批量交付）',
  trial_source_name varchar(255) DEFAULT NULL COMMENT '项目阶段名称',
  project_id varchar(100) DEFAULT NULL COMMENT '项目id（关联项目表）',
  product_id varchar(255) DEFAULT NULL COMMENT '产品名称（目前关联物料表）',
  product_number varchar(255) DEFAULT NULL COMMENT '产品型号',
  problem_type char(1) DEFAULT NULL COMMENT '问题类型（0设计问题，1质量问题）',
  problem_type_name varchar(255) DEFAULT NULL COMMENT '问题类型名称',
  class_code varchar(100) DEFAULT NULL COMMENT '分级',
  trial_comment varchar(1000) DEFAULT NULL COMMENT '试验内容',
  problem_describe text COMMENT '问题描述',
  platform_duty_man varchar(50) DEFAULT NULL COMMENT '平台负责人（源表无数据20250606）',
  attach_file_id varchar(512) DEFAULT NULL COMMENT '附件id',
  foremen varchar(50) DEFAULT NULL COMMENT '工段长id（源表无数据20250606）',
  design_leader varchar(100) DEFAULT NULL COMMENT '设计主管id',
  design_leader_name varchar(100) DEFAULT NULL COMMENT '设计主管名称',
  status varchar(100) DEFAULT NULL COMMENT '状态（0,1,2)',
  act_process_id varchar(100) DEFAULT NULL COMMENT '流程实例ID',
  task_id varchar(100) DEFAULT NULL COMMENT '任务ID',
  task_code varchar(100) DEFAULT NULL COMMENT '任务编码',
  task_name varchar(100) DEFAULT NULL COMMENT '任务名称',
  del_flag char(1) DEFAULT NULL COMMENT '删除标识',
  del_flag_name varchar(100) DEFAULT NULL COMMENT '删除标识名称',
  tenant_id varchar(50) DEFAULT NULL COMMENT '租户id（源表无数据20250606）',
  dept_id varchar(100) DEFAULT NULL COMMENT '部门id（源表无数据20250606）',
  create_by varchar(100) DEFAULT NULL COMMENT '创建者',
  create_name varchar(100) DEFAULT NULL COMMENT '创建者名称',
  create_date date DEFAULT NULL COMMENT '创建时间',
  update_by varchar(100) DEFAULT NULL COMMENT '更新者',
  remarks varchar(255) DEFAULT NULL COMMENT '备注',
  update_date date DEFAULT NULL COMMENT '更新时间',
  task_flag char(1) DEFAULT NULL COMMENT '任务进度（‘0’待分解，‘1’待处置，‘2’处置完成）',
  task_flag_name varchar(255) DEFAULT NULL COMMENT '任务进度名称',
  quality_engineer varchar(100) DEFAULT NULL COMMENT '批量质量工程师id',
  quality_engineer_name varchar(100) DEFAULT NULL COMMENT '批量质量工程师名称',
  resolve_id varchar(100) DEFAULT NULL COMMENT '质量工程师任务分解表id',
  trial_project varchar(255) DEFAULT NULL COMMENT '试验项目(项目阶段为型式试验填写)',
  material_name varchar(255) DEFAULT NULL COMMENT '物料名称',
  happen_date date DEFAULT NULL COMMENT '发生日期',
  fault_type_id varchar(100) DEFAULT NULL COMMENT '缺陷分类ID',
  fault_type_name varchar(100) DEFAULT NULL COMMENT '缺陷分类名称',
  fault_id varchar(100) DEFAULT NULL COMMENT '缺陷ID',
  fault_name varchar(100) DEFAULT NULL COMMENT '缺陷名称',
  diagnose_engineer_id varchar(100) DEFAULT NULL COMMENT '诊断工程师',
  diagnose_engineer_name varchar(50) DEFAULT NULL COMMENT '诊断工程师名称',
  problem_category char(2) DEFAULT NULL COMMENT '问题类别(0-设计类, 1-工艺类, 2-供方质量, 3-电器类)',
  problem_category_name varchar(100) DEFAULT NULL COMMENT '问题类别名称',
  finish_time date DEFAULT NULL COMMENT '完成时间',
  duty_department_id varchar(100) DEFAULT NULL COMMENT '责任方id',
  duty_department_name varchar(50) DEFAULT NULL COMMENT '责任方名称',
  duty_informer_id varchar(100) DEFAULT NULL COMMENT '责任告知人id',
  duty_informer_name varchar(50) DEFAULT NULL COMMENT '责任告知人名称',
  cause_type_id varchar(100) DEFAULT NULL COMMENT '原因分类id',
  cause_type_name varchar(255) DEFAULT NULL COMMENT '原因分类名称',
  cause_id varchar(100) DEFAULT NULL COMMENT '原因id',
  cause_name varchar(255) DEFAULT NULL COMMENT '原因名称',
  handle_plan_user_id varchar(50) DEFAULT NULL COMMENT '处置方案填写人id',
  handle_plan_user_name varchar(50) DEFAULT NULL COMMENT '处置方案填写人名称',
  close_user_id varchar(50) DEFAULT NULL COMMENT '验证关闭人',
  close_user_name varchar(50) DEFAULT NULL COMMENT '验证关闭人名称',
  back_flag char(2) DEFAULT NULL COMMENT '让步接收标志 0 -是, 1 -否',
  back_flag_name varchar(50) DEFAULT NULL COMMENT '让步接收标志名称',
  department_leader_id varchar(50) DEFAULT NULL COMMENT '部门领导id',
  department_leader_name varchar(50) DEFAULT NULL COMMENT '部门领导名称',
  customer_id varchar(50) DEFAULT NULL COMMENT '顾客id',
  customer_name varchar(50) DEFAULT NULL COMMENT '顾客名称',
  back_approver_id varchar(50) DEFAULT NULL COMMENT '让步接收审批人id',
  back_approver_name varchar(50) DEFAULT NULL COMMENT '让步接收审批人名称',
  batch_effect char(2) DEFAULT NULL COMMENT '是否影响批量生产 0 - 是, 1 - 否',
  batch_effect_name varchar(50) DEFAULT NULL COMMENT '是否影响批量生产名称',
  quality_engineer_id varchar(50) DEFAULT NULL COMMENT '质量工程师id',
  quality_engineer_id_name varchar(50) DEFAULT NULL COMMENT '质量工程师名称',
  PRO_MODEL_NAME varchar(255) DEFAULT NULL COMMENT '产品名称',
  PRO_MODEL varchar(255) DEFAULT NULL COMMENT '产品型号',
  attach_file_name varchar(512) DEFAULT NULL COMMENT '附件名称',
  submit_user_id varchar(50) DEFAULT NULL COMMENT '开立人',
  submit_user_name varchar(50) DEFAULT NULL COMMENT '开立人名称',
  final_flag char(2) DEFAULT NULL COMMENT '是否作为最终方案 0 - 是, 1 - 否',
  final_flag_name varchar(50) DEFAULT NULL COMMENT '是否作为最终方案名称',
  technical_user_id varchar(50) DEFAULT NULL COMMENT '技术人员意见id',
  technical_user_name varchar(50) DEFAULT NULL COMMENT '技术人员意见名称',
  quality_user_id varchar(50) DEFAULT NULL COMMENT '产品验证人员id',
  quality_user_name varchar(50) DEFAULT NULL COMMENT '产品验证人员名称',
  out_flag char(2) DEFAULT NULL COMMENT '出厂标志 0 - 是, 1 - 否',
  out_flag_name varchar(50) DEFAULT NULL COMMENT '出厂标志名称',
  crafts_user_id varchar(50) DEFAULT NULL COMMENT '工艺师id',
  crafts_user_name varchar(50) DEFAULT NULL COMMENT '工艺师名称',
  project_name varchar(255) DEFAULT NULL COMMENT '项目名称',
  submit_time date DEFAULT NULL COMMENT '提交时间',
  now_user_id varchar(100) DEFAULT NULL COMMENT '当前处置人',
  now_user_name varchar(100) DEFAULT NULL COMMENT '当前处置人名称',
  submit_department_id varchar(100) DEFAULT NULL COMMENT '开立部门ID',
  submit_department_name varchar(100) DEFAULT NULL COMMENT '开立部门名称',
  parent_duty_id varchar(100) DEFAULT NULL COMMENT '责任部门ID',
  parent_duty_name varchar(100) DEFAULT NULL COMMENT '责任部门名称',
  label varchar(100) DEFAULT NULL COMMENT '平台',
  handle_plan text COMMENT '临时处置方案',
  final_plan text COMMENT '最终处置方案',
  project_type char(1) DEFAULT NULL COMMENT '项目类型 0-外部项目, 1-自研项目',
  project_type_name varchar(255) DEFAULT NULL COMMENT '项目类型名称',
  overdue_flag char(1) DEFAULT NULL COMMENT '0-进行中(默认), 1-已逾期',
  overdue_flag_name varchar(255) DEFAULT NULL COMMENT '逾期标志名称',
  diagnose_time date DEFAULT NULL COMMENT '问题确认时间',
  analysis_cause text COMMENT '原因分析',
  analysis_time date DEFAULT NULL COMMENT '处置方案时间',
  close_report text COMMENT '验证记录',
  close_time date DEFAULT NULL COMMENT '验证关闭时间',
  problem_summary varchar(255) DEFAULT NULL COMMENT '故障描述缩写',
  plan_user_id varchar(255) DEFAULT NULL COMMENT '计划员（源表无数据20250609）'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='历史故障记录--试验和试制异常';



CREATE TABLE kn_quality_trace_history_plat_project (
  etl_time varchar(200) DEFAULT NULL COMMENT 'etl时间戳',
  plat_id varchar(200) DEFAULT NULL COMMENT '平台id唯一标识',
  plat_create_by varchar(200) DEFAULT NULL COMMENT '平台创建人',
  plat_create_date date DEFAULT NULL COMMENT '平台创建时间',
  plat_name varchar(200) DEFAULT NULL COMMENT '平台名称',
  plat_code varchar(200) DEFAULT NULL COMMENT '平台编码',
  plat_use_flag char(1) DEFAULT NULL COMMENT '平台状态（0:启用, 1:停用）',
  project_create_by varchar(200) DEFAULT NULL COMMENT '项目创建人',
  project_create_date date DEFAULT NULL COMMENT '项目创建时间',
  project_update_by varchar(200) DEFAULT NULL COMMENT '项目更新人',
  project_update_date date DEFAULT NULL COMMENT '项目更新时间',
  project_name varchar(200) DEFAULT NULL COMMENT '项目名称 /（mdm也会传）',
  project_code varchar(200) DEFAULT NULL COMMENT '项目编码 /（mdm也会传）',
  project_project_year varchar(200) DEFAULT NULL COMMENT '项目年份 /（mdm也会传）',
  project_status varchar(10) DEFAULT NULL COMMENT '项目状态（0：未启用，1：启用）/（mdm也会传）',
  project_dept_id varchar(200) DEFAULT NULL COMMENT '所属部门id /（mdm也会传）',
  project_qa_date varchar(200) DEFAULT NULL COMMENT '质保到期日（mdm）',
  project_fai_date varchar(200) DEFAULT NULL COMMENT 'fai日期（mdm）',
  project_pro_model varchar(200) DEFAULT NULL COMMENT '产品型号（mdm）',
  project_pro_model_name varchar(200) DEFAULT NULL COMMENT '产品名称（mdm）',
  project_pro_structure varchar(200) DEFAULT NULL COMMENT '产品结构（mdm）',
  project_pro_str_name varchar(200) DEFAULT NULL COMMENT '产品结构名称（mdm）',
  project_pro_type varchar(200) DEFAULT NULL COMMENT '产品分类（mdm）',
  project_pro_type_name varchar(200) DEFAULT NULL COMMENT '产品分类名称（mdm）',
  project_p_id varchar(200) DEFAULT NULL COMMENT '主项目编码（父项目id） /（mdm也会传）',
  project_type varchar(200) DEFAULT NULL COMMENT '项目类型（mdm）',
  project_ascription_customer varchar(200) DEFAULT NULL COMMENT '所属客户（mdm）',
  project_tenant_id varchar(200) DEFAULT NULL COMMENT '租户id',
  project_corp_id varchar(200) DEFAULT NULL COMMENT '公司id',
  project_plant_id varchar(200) DEFAULT NULL COMMENT '工厂id',
  project_org_id varchar(200) DEFAULT NULL COMMENT '组织机构id',
  project_order_id varchar(200) DEFAULT NULL COMMENT '机号',
  project_all_plant_flag char(1) DEFAULT NULL COMMENT '是否全厂项目（1:是，0:否）',
  project_plant_code varchar(200) DEFAULT NULL COMMENT '工厂代码',
  project_plat_id varchar(200) DEFAULT NULL COMMENT '平台id',
  project_label varchar(200) DEFAULT NULL COMMENT '平台标签',
  project_remarks varchar(1000) DEFAULT NULL COMMENT '备注 / 略称'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='历史故障记录--平台管理';




CREATE TABLE kn_quality_trace_project_delivery (
  etl_time varchar(255) DEFAULT NULL COMMENT '时间戳',
  project_name varchar(255) DEFAULT NULL COMMENT '项目名称',
  project_code varchar(255) DEFAULT NULL COMMENT '项目编号',
  product_name varchar(255) DEFAULT NULL COMMENT '产品名称',
  wbs varchar(255) DEFAULT NULL COMMENT 'wbs号',
  batch_no varchar(255) DEFAULT NULL COMMENT '列次',
  project_delivery_time date DEFAULT NULL COMMENT '项目交付日期',
  actual_delivery_time date DEFAULT NULL COMMENT '实际发货日期',
  notes varchar(500) DEFAULT NULL COMMENT '备注'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='项目交付时间';



CREATE TABLE kn_quality_trace_sys_dict_pub (
  id varchar(64) NOT NULL,
  type varchar(100) DEFAULT NULL COMMENT '类型',
  value varchar(100) DEFAULT NULL COMMENT '键值',
  label varchar(100) DEFAULT NULL COMMENT 'label',
  description varchar(100) DEFAULT NULL COMMENT '描述',
  sort int DEFAULT NULL COMMENT '排序',
  parent_id varchar(64) DEFAULT NULL COMMENT '父级id',
  del_flag char(1) DEFAULT NULL COMMENT '删除位',
  remarks varchar(255) DEFAULT NULL COMMENT '备注',
  create_by varchar(64) DEFAULT NULL COMMENT '创建人',
  create_date datetime DEFAULT NULL COMMENT '创建时间',
  update_by varchar(64) DEFAULT NULL COMMENT '更新人',
  update_date datetime DEFAULT NULL COMMENT '更新时间',
  tenant_id varchar(64) DEFAULT NULL COMMENT '租户ID',
  PRIMARY KEY (id) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=DYNAMIC COMMENT='平台字典表';